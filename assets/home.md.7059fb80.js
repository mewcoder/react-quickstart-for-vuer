import{_ as a,o as l,c as p,O as n,z as s}from"./chunks/framework.4cc8393d.js";const f=JSON.parse('{"title":"å†™ç»™ vuer çš„ react çš„å¿«é€Ÿä¸Šæ‰‹æŒ‡å—","description":"","frontmatter":{},"headers":[],"relativePath":"home.md","filePath":"home.md"}'),o={name:"home.md"},e=n(`<h1 id="å†™ç»™-vuer-çš„-react-çš„å¿«é€Ÿä¸Šæ‰‹æŒ‡å—" tabindex="-1">å†™ç»™ vuer çš„ react çš„å¿«é€Ÿä¸Šæ‰‹æŒ‡å— <a class="header-anchor" href="#å†™ç»™-vuer-çš„-react-çš„å¿«é€Ÿä¸Šæ‰‹æŒ‡å—" aria-label="Permalink to &quot;å†™ç»™ vuer çš„ react çš„å¿«é€Ÿä¸Šæ‰‹æŒ‡å—&quot;">â€‹</a></h1><blockquote><p>ä¸»è¦å¯¹æ¯” Vue3+ å’Œ React16.8+</p></blockquote><blockquote><p>å¤šçœ‹æ–‡æ¡£ï¼ï¼ï¼</p><p><a href="https://react.dev/" target="_blank" rel="noreferrer">https://react.dev/</a> <a href="https://legacy.reactjs.org/" target="_blank" rel="noreferrer">https://legacy.reactjs.org/</a> <a href="https://zh-hans.reactjs.org/" target="_blank" rel="noreferrer">https://zh-hans.reactjs.org/</a> <a href="https://zh-hans.legacy.reactjs.org/" target="_blank" rel="noreferrer">https://zh-hans.legacy.reactjs.org/</a></p><p><a href="https://cn.vuejs.org/" target="_blank" rel="noreferrer">https://cn.vuejs.org/</a> <a href="https://v2.cn.vuejs.org/" target="_blank" rel="noreferrer">https://v2.cn.vuejs.org/</a></p></blockquote><h2 id="_1-ç»„ä»¶é£æ ¼" tabindex="-1">1. ç»„ä»¶é£æ ¼ <a class="header-anchor" href="#_1-ç»„ä»¶é£æ ¼" aria-label="Permalink to &quot;1. ç»„ä»¶é£æ ¼&quot;">â€‹</a></h2><h3 id="_1-1-react" tabindex="-1">1.1 React <a class="header-anchor" href="#_1-1-react" aria-label="Permalink to &quot;1.1 React&quot;">â€‹</a></h3><p>Reactä¸­æä¾›äº†ä¸¤ç§é£æ ¼çš„ç»„ä»¶ï¼šç±»ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶</p><blockquote><p>React ç±»å¼ç»„ä»¶å·²è¿‡æ—¶ï¼Œç®€å•äº†è§£å³å¯ï¼ŒğŸ‘‰<a href="https://react.dev/blog/2023/03/16/introducing-react-dev#going-all-in-on-modern-react-with-hooks" target="_blank" rel="noreferrer">going-all-in-on-modern-react-with-hooks</a></p></blockquote><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// ç±»ç»„ä»¶</span></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Greeting</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Component</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ç±»ç»„ä»¶renderæ–¹æ³•æ˜¯å¿…é¡»çš„</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">render</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">h1</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">Hello, </span><span style="color:#89DDFF;">{this.</span><span style="color:#A6ACCD;">props</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">!</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">h1</span><span style="color:#89DDFF;">&gt;;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// å‡½æ•°ç»„ä»¶</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Greeting</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">props</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">h1</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">Hello, </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">props</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">}&lt;/</span><span style="color:#F07178;">h1</span><span style="color:#89DDFF;">&gt;;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>å‡½æ•°ç»„ä»¶ç›¸æ¯”è¾ƒç±»ç»„ä»¶ï¼Œä¾é Hooksï¼š</p><ul><li>æ›´ç®€æ´</li><li>ä¾¿äºé€»è¾‘çš„æ‹†åˆ†å¤ç”¨</li><li>æ²¡æœ‰ this æŒ‡å‘ä¸æ˜é—®é¢˜</li></ul><h3 id="_2-2-vue" tabindex="-1">2.2 Vue <a class="header-anchor" href="#_2-2-vue" aria-label="Permalink to &quot;2.2 Vue&quot;">â€‹</a></h3><p><strong>Options API</strong>ï¼šVue2 æ—¶æœŸçš„ Classé£æ ¼ï¼ŒVue3ä¹Ÿæ”¯æŒï¼Œä½† Vue3 æ›´æ¨èä½¿ç”¨ç±»ä¼¼ React Hooks çš„ Composition API</p><div class="language-vue"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">data</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      count</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">methods</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">increment</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">count</span><span style="color:#89DDFF;">++;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">@click</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">increment</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">Count is: {{ count }}</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><p><strong>Composition API</strong>ï¼šVue3 å€Ÿé‰´ Hooks çš„æ€æƒ³ï¼ŒåŸºäºå“åº”å¼ç³»ç»Ÿå®ç°äº†ç»„åˆå¼APIï¼Œèƒ½æ›´å¥½åœ°ç»„ç»‡ä»£ç å’Œé€»è¾‘é‡ç”¨ã€‚</p><blockquote><p>æ³¨æ„ Composition API åªæ˜¯ä¸€ç§é£æ ¼ï¼Œé€šè¿‡ setup é€‰é¡¹/æˆ–è€… <code>&lt;script setup&gt;</code> è¯­æ³•ç³–å®šä¹‰ï¼›ä¸¤ç§ API é£æ ¼éƒ½æ˜¯åŸºäºåŒä¸€ä¸ªåº•å±‚ç³»ç»Ÿï¼›</p><ul><li>Vue3 ä¸­é€‰é¡¹å¼ API æ˜¯åœ¨ç»„åˆå¼ API çš„åŸºç¡€ä¸Šå®ç°çš„ğŸ‘‰ <a href="https://github.com/vuejs/core/blob/main/packages/runtime-core/src/componentOptions.ts#L608" target="_blank" rel="noreferrer">applyOptions</a>ã€‚</li><li>Vue2.7 ä¹Ÿæ”¯æŒäº† Composition APIï¼ŒğŸ‘‰<a href="https://github.com/vuejs/vue/blob/main/src/v3/index.ts" target="_blank" rel="noreferrer">src/V3</a>ï¼Œä½¿ç”¨ä¸Šæœ‰ä¸€äº›<a href="https://blog.vuejs.org/posts/vue-2-7-naruto" target="_blank" rel="noreferrer">é™åˆ¶</a>ã€‚</li></ul></blockquote><div class="language-vue"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">setup</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ref</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">vue</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> count </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ref</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">increment</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">count</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">++;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">@click</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">increment</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">Count is: {{ count }}</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><blockquote><p><a href="https://cn.vuejs.org/api/sfc-script-setup.html" target="_blank" rel="noreferrer">script setup</a></p><p><a href="https://cn.vuejs.org/guide/reusability/composables.html" target="_blank" rel="noreferrer">ç»„åˆå¼API</a></p><p><a href="https://cn.vuejs.org/guide/extras/composition-api-faq.html" target="_blank" rel="noreferrer">ç»„åˆå¼ API å¸¸è§é—®ç­”</a></p></blockquote><h2 id="_2-jsx-template" tabindex="-1">2. JSX &amp; template <a class="header-anchor" href="#_2-jsx-template" aria-label="Permalink to &quot;2. JSX &amp; template&quot;">â€‹</a></h2><p>JSX æ˜¯ä¸€ä¸ª JavaScript çš„è¯­æ³•æ‰©å±•ï¼Œæˆ–è€…è¯´æ˜¯ä¸€ä¸ªç±»ä¼¼äº XML çš„ ECMAScript è¯­æ³•æ‰©å±•ã€‚</p><p>JSX å’Œ template å¯¹æ¯”</p><ul><li><p>JSXï¼šæ‹¥æœ‰ JS çš„èƒ½åŠ›ï¼Œæ›´çº¯ç²¹ï¼Œæ›´çµæ´»ï¼›ç±»å‹æ”¯æŒå¥½</p></li><li><p>templateï¼š</p><ul><li>ä¼˜ç‚¹ï¼šå¯è¯»æ€§å¥½ï¼Œæ›´æ˜“ä¸Šæ‰‹ï¼Œé€‚åˆåˆå­¦è€…ï¼›vueé€šè¿‡ç¼–è¯‘å¯åšä¼˜åŒ–ï¼›</li><li>ç¼ºç‚¹ï¼šå¼•å…¥æ¨¡æ¿è¯­æ³•ã€æ¨¡æ¿æŒ‡ä»¤ç­‰æ–°æ¦‚å¿µï¼›ç±»å‹æ”¯æŒä¸å¥½ï¼›</li></ul></li></ul><h3 id="_2-1-jsx-ä½¿ç”¨" tabindex="-1">2.1 JSX ä½¿ç”¨ <a class="header-anchor" href="#_2-1-jsx-ä½¿ç”¨" aria-label="Permalink to &quot;2.1 JSX ä½¿ç”¨&quot;">â€‹</a></h3><blockquote><p><a href="https://transform.tools/html-to-jsx" target="_blank" rel="noreferrer">html-to-jsx</a></p></blockquote><p>å…ˆç®€å•ä»‹ç»ä¸€ä¸‹ JSX çš„ä½¿ç”¨ï¼Œå¯¹äº Vue ä½¿ç”¨è€…æ¥è¯´åˆšä¸Šæ‰‹å¯èƒ½æœ‰äº›åˆ«æ‰­ï¼Œéœ€è¦é€‚åº”ã€‚</p><ol><li>å±æ€§è¦å˜é©¼å³°</li></ol><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">img</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">className</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">avatar</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;;</span></span></code></pre></div><ol start="2"><li>å˜é‡è¦ç”¨<code>{}</code></li></ol><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> (</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">h1</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#C792EA;">style</span><span style="color:#89DDFF;">={{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">color</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> user</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">color</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}}</span></span>
<span class="line"><span style="color:#89DDFF;">  &gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span><span style="color:#676E95;font-style:italic;">/* å•è¡Œæ³¨é‡Š */</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">user</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">h1</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// style={{}}ä¸æ˜¯ç‰¹æ®Šè¯­æ³•ï¼Œé‡Œé¢çš„èŠ±æ‹¬å·ä»£è¡¨styleå¯¹è±¡</span></span></code></pre></div><ol start="3"><li>æ¡ä»¶æ¸²æŸ“ï¼šåŸºäº JS çš„èƒ½åŠ›</li></ol><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;{</span><span style="color:#A6ACCD;">isLoggedIn </span><span style="color:#89DDFF;">?</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">AdminPanel</span><span style="color:#89DDFF;"> /&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">LoginForm</span><span style="color:#89DDFF;"> /&gt;}&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;{</span><span style="color:#A6ACCD;">isLoggedIn </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">AdminPanel</span><span style="color:#89DDFF;"> /&gt;}&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;;</span></span></code></pre></div><ol start="4"><li>åˆ—è¡¨æ¸²æŸ“ï¼šåŸºäº JS çš„èƒ½åŠ›ï¼Œä½¿ç”¨map</li></ol><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> listItems </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> products</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">map</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">product</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> (</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">li</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">key</span><span style="color:#89DDFF;">={</span><span style="color:#A6ACCD;">product</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">id</span><span style="color:#89DDFF;">}&gt;{</span><span style="color:#A6ACCD;">product</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">title</span><span style="color:#89DDFF;">}&lt;/</span><span style="color:#F07178;">li</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">ul</span><span style="color:#89DDFF;">&gt;{</span><span style="color:#A6ACCD;">listItems</span><span style="color:#89DDFF;">}&lt;/</span><span style="color:#F07178;">ul</span><span style="color:#89DDFF;">&gt;;</span></span></code></pre></div><ol start="5"><li>å£°æ˜äº‹ä»¶</li></ol><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">onClick</span><span style="color:#89DDFF;">={</span><span style="color:#A6ACCD;">handleClick</span><span style="color:#89DDFF;">}&gt;</span><span style="color:#A6ACCD;">Click me</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;;</span></span></code></pre></div><ol start="6"><li>ç»„ä»¶è¿”å›å¤šä¸ªå…ƒç´ ,<code>React.Fragment</code>çš„è¯­æ³•ç³–ï¼Œvue2ä¸æ”¯æŒï¼Œvue3æ”¯æŒ</li></ol><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> (</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">1</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">2</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  )</span><span style="color:#89DDFF;">;</span></span></code></pre></div><h3 id="_2-2-æ¸²æŸ“å‡½æ•°" tabindex="-1">2.2 æ¸²æŸ“å‡½æ•° <a class="header-anchor" href="#_2-2-æ¸²æŸ“å‡½æ•°" aria-label="Permalink to &quot;2.2 æ¸²æŸ“å‡½æ•°&quot;">â€‹</a></h3><p>React å’Œ Vue éƒ½æ˜¯åŸºäºè™šæ‹ŸDOMè®¾è®¡çš„ï¼ŒJSX æˆ– template éƒ½ä¼šç¼–è¯‘æˆ render å‡½æ•°ï¼Œè¿”å› VNode</p><p>JSX è¿™ç§å±äºå£°æ˜å¼ï¼Œè€Œç›´æ¥ä½¿ç”¨createElement å±äºç¼–ç¨‹å¼ã€‚</p><p><strong>React</strong></p><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">createElement</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">react</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// å‡½æ•°ç»„ä»¶ç›´æ¥returnï¼Œç±»ç»„ä»¶éœ€è¦å®šä¹‰renderå‡½æ•°</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Greeting</span><span style="color:#89DDFF;">({</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">})</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">createElement</span><span style="color:#F07178;">(</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">h1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> className</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">greeting</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Hello </span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">createElement</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">i</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">. Welcome!</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">  )</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// ç­‰ä»·äºJSX:</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Greeting</span><span style="color:#89DDFF;">({</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">})</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> (</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">h1</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">className</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">greeting</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      Hello </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">i</span><span style="color:#89DDFF;">&gt;{</span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">}&lt;/</span><span style="color:#F07178;">i</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">. Welcome!</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">h1</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#F07178;">  )</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>React é€šè¿‡ <code>createElement</code> åˆ›å»º VNodeï¼ŒReact é€šè¿‡ Babel æ’ä»¶å°† JSX è¯­æ³•ç¼–è¯‘æˆä¸º <code>createElement</code> çš„ä»£ç ï¼ŒJSX å¯ä»¥çœ‹åšè¯­æ³•ç³–ã€‚</p><blockquote><p><code>createElement(type, props, ...children)</code></p><p><a href="https://babeljs.io/repl" target="_blank" rel="noreferrer">https://babeljs.io/repl</a></p></blockquote><p><strong>Vue</strong></p><p>Vue3 æä¾›äº† h å‡½æ•°ç”¨äºåˆ›å»º VNodeï¼ŒVue2 ç•¥æœ‰å·®å¼‚ï¼›Vue æ˜¯é€šè¿‡ Compiler å°† template ç¼–è¯‘æˆ render å‡½æ•°</p><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">h</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ref</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vue</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">setup</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">count</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">ref</span><span style="color:#F07178;">(</span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// setup å¯ä»¥ç›´æ¥è¿”å›ä¸€ä¸ªæ¸²æŸ“å‡½æ•°ï¼Œæˆ–è€…é€šè¿‡renderé€‰é¡¹å®šä¹‰</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">h</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">div</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">count</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><blockquote><p><a href="https://cn.vuejs.org/guide/extras/render-function.html#render-functions-jsx" target="_blank" rel="noreferrer">Vue3æ–‡æ¡£-æ¸²æŸ“å‡½æ•° &amp; JSX</a></p><p><a href="https://v2.cn.vuejs.org/v2/guide/render-function.html" target="_blank" rel="noreferrer">Vue2æ–‡æ¡£-æ¸²æŸ“å‡½æ•° &amp; JSX</a></p></blockquote><h2 id="_3-react-hooks" tabindex="-1">3. React Hooks <a class="header-anchor" href="#_3-react-hooks" aria-label="Permalink to &quot;3. React Hooks&quot;">â€‹</a></h2><p>Hooks åªèƒ½åœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨ï¼Œä¸”åªèƒ½åœ¨ç»„ä»¶å‡½æ•°çš„æœ€é¡¶å±‚ï¼ˆæ¡ä»¶è¯­å¥ã€å¾ªç¯è¯­å¥æˆ–å…¶ä»–åµŒå¥—å‡½æ•°å†…éƒ½ä¸è¡Œï¼‰è°ƒç”¨ã€‚</p><h3 id="_3-1-usestate" tabindex="-1">3.1 useState <a class="header-anchor" href="#_3-1-usestate" aria-label="Permalink to &quot;3.1 useState&quot;">â€‹</a></h3><p>è®©å‡½æ•°ç»„ä»¶ä¹Ÿå¯ä»¥æœ‰ state çŠ¶æ€, å¹¶è¿›è¡ŒçŠ¶æ€æ•°æ®çš„è¯»å†™æ“ä½œã€‚</p><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">count</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> setCount</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">useState</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//     -------  ----------          -----</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//        ^         ^                 ^</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//        |         |                 |</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//    stateå˜é‡  state setterå‡½æ•°        stateåˆå§‹å€¼</span></span></code></pre></div><ul><li>setter å‡½æ•°çš„åŠŸèƒ½ï¼Œæ›´æ–° state å˜é‡å¹¶è§¦å‘ React é‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚æ¯æ¬¡æ›´æ–° state éƒ½ä¼šé‡æ–°ç”Ÿæˆä¸€ä»½å¿«ç…§ï¼Œå‡½æ•°(ç»„ä»¶)ä¼šæ ¹æ®æ–°çš„ state ç”Ÿæˆæ–°çš„ VNodeï¼Œç„¶åæ›´æ–°è§†å›¾ã€‚</li><li>setter å‡½æ•°åˆ†ä¸¤ç§æƒ…å†µï¼š</li></ul><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">count</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> setCount</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">useState</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// ä¼ å…¥æ™®é€šå€¼ï¼Œç”±äºæ‹¿åˆ°å½“å‰çš„ count:0ï¼Œå¹¶ä¸ä¼šä¿®æ”¹å½“å‰çš„count</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> add1 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">setCount</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">count</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// =&gt; count = 0 + 1 = 1</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">setCount</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">count</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// =&gt; count = 0 + 1 = 1</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">setCount</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">count</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// =&gt; count = 0 + 1 = 1 </span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// ä¼ å…¥å‡½æ•°\`n =&gt; n + 1\`,å¯ä»¥æ‹¿åˆ°æ›´æ–°åçš„ count,ç›¸å½“äºæŠŠæ›´æ–°å‡½æ•°åŠ å…¥äº†é˜Ÿåˆ—</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> add2 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">setCount</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;font-style:italic;">n</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">n</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// =&gt; count = 0 + 1 = 1</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">setCount</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;font-style:italic;">n</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">n</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// =&gt; count = 1 + 1 = 2 </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">setCount</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;font-style:italic;">n</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">n</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// =&gt; count = 2 + 1 = 3</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span></code></pre></div><blockquote><p>React çš„å¼ºè°ƒçš„æ˜¯æ•°æ®ä¸å¯å˜(immutable)ï¼Œè€Œ Vue æ ¸å¿ƒæ˜¯å“åº”å¼(æ•°æ®å¯å˜)</p></blockquote><h3 id="_3-2-useeffect-uselayouteffect" tabindex="-1">3.2 useEffect&amp;useLayoutEffect <a class="header-anchor" href="#_3-2-useeffect-uselayouteffect" aria-label="Permalink to &quot;3.2 useEffect&amp;useLayoutEffect&quot;">â€‹</a></h3><blockquote><p>å‰¯ä½œç”¨å°±æ˜¯è®©ä¸€ä¸ªå‡½æ•°ä¸å†æ˜¯çº¯å‡½æ•°çš„å„ç±»æ“ä½œï¼Œæ¯”å¦‚è¯·æ±‚æ•°æ®ï¼ŒDOMæ“ä½œç­‰</p></blockquote><ul><li>å¯ç”¨äºæ¨¡æ‹Ÿç±»ç»„ä»¶ä¸­çš„ç”Ÿå‘½å‘¨æœŸé’©å­</li><li>å‰¯ä½œç”¨æ‰§è¡Œ</li></ul><p><strong>useEffect</strong></p><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">useEffect</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#676E95;font-style:italic;">/* çœç•¥ */</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#676E95;font-style:italic;">/* çœç•¥ */</span><span style="color:#89DDFF;">};},</span><span style="color:#A6ACCD;"> [status])</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//        ------------------------------------------     -------</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//                       ^         -----------------        ^</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//                       |                 ^                |</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//                  å‰¯ä½œç”¨å›è°ƒå‡½æ•°         æ¸…é™¤å‡½æ•°         ä¾èµ–å€¼æ•°ç»„</span></span></code></pre></div><ul><li><p>å¦‚æœä¸ä¼ ç¬¬äºŒä¸ªå‚æ•°ï¼Œåˆ™æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šè°ƒç”¨</p></li><li><p>å¦‚æœä¾èµ–å€¼æ•°ç»„ä¸ºç©ºï¼Œåˆ™å‰¯ä½œç”¨å›è°ƒå‡½æ•°ä¼šåœ¨ç»„ä»¶æŒ‚è½½åæ‰§è¡Œä¸€æ¬¡ï¼ˆå¯ä»¥è®¿é—® DOMï¼‰ã€‚å¯¹æ ‡ Vue ä¸­çš„<code>onMouted</code></p><ul><li>å¦‚æœ return äº†å‡½æ•°ï¼Œåˆ™ä¸ºæ¸…é™¤å‡½æ•°ï¼Œä¼šåœ¨ç»„ä»¶è¢«å¸è½½ä¹‹å‰æ‰§è¡Œã€‚å¯¹æ ‡ Vue ä¸­çš„<code>onUnmouted</code></li></ul></li><li><p>å¦‚æœä¾èµ–å€¼æ•°ç»„ä¸ä¸ºç©ºï¼Œå…¶ä¸­çš„å€¼å¦‚æœå‘ç”Ÿå˜åŒ–( shallow compare )ï¼Œå‰¯ä½œç”¨å›è°ƒå‡½æ•°ä¼šé‡æ–°æ‰§è¡Œã€‚</p><ul><li>ä¾èµ–å€¼å¯ä»¥ä½¿ç”¨ propsã€stateã€context çš„å˜é‡</li></ul></li></ul><blockquote><p>Vue ä¸­ watchEffect ä¼šè‡ªåŠ¨è¿½è¸ªä¾èµ–ï¼Œä¸”é¦–æ¬¡ä¼šæ‰§è¡Œã€‚</p></blockquote><p><strong>useLayoutEffect</strong></p><p>ä½¿ç”¨æ–¹æ³•å’Œ useEffect ç›¸åŒï¼Œä½†å®ƒä¼šåœ¨æ‰€æœ‰DOMå˜æ›´ä¹‹å<strong>åŒæ­¥</strong>è°ƒç”¨å›è°ƒå‡½æ•°ï¼Œå’Œ componentDidMount æ—¶æœºç›¸åŒ</p><p>è€Œ useEffect çš„å›è°ƒå‡½æ•°ä¼šåœ¨ç»„ä»¶æ¸²æŸ“åˆ°å±å¹•ä¹‹å<strong>å»¶è¿Ÿ</strong>æ‰§è¡Œã€‚</p><h3 id="_3-3-usecontext" tabindex="-1">3.3 useContext <a class="header-anchor" href="#_3-3-usecontext" aria-label="Permalink to &quot;3.3 useContext&quot;">â€‹</a></h3><blockquote><p>ç±»ä¼¼ Vue ä¸­çš„ provide å’Œ inject</p></blockquote><p>å¦‚æœç»„ä»¶å±‚çº§æ¯”è¾ƒæ·±ï¼Œä½¿ç”¨ props é€çº§é€ä¼ ä¸æ–¹ä¾¿ï¼Œå¯ä½¿ç”¨ <code>createContext</code>å’Œ<code>useContext</code></p><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">createContext</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">useContext</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">react</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> ThemeContext </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">createContext</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">null</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">MyApp</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> (</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">ThemeContext.Provider</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">value</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">dark</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">Form</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#FFCB6B;">ThemeContext.Provider</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#F07178;">  )</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// Button æ˜¯ MyApp çš„åä»£ç»„ä»¶</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Button</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">theme</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">useContext</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">ThemeContext</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">className</span><span style="color:#89DDFF;">={</span><span style="color:#A6ACCD;">theme</span><span style="color:#89DDFF;">} /&gt;;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><h3 id="_3-4-useref-useimperativehandle" tabindex="-1">3.4 useRef&amp;useImperativeHandle <a class="header-anchor" href="#_3-4-useref-useimperativehandle" aria-label="Permalink to &quot;3.4 useRef&amp;useImperativeHandle&quot;">â€‹</a></h3><p>ä½¿ç”¨<code>useState</code>å®šä¹‰çš„å˜é‡ï¼Œæ¯æ¬¡æ¸²æŸ“çš„éƒ½æ˜¯ä¸€ä¸ª state å¿«ç…§ï¼Œæ˜¯ç›¸äº’ç‹¬ç«‹çš„ã€‚å¦‚ä½•è®©ç»„ä»¶åœ¨é‡æ–°æ¸²æŸ“ä¹‹é—´ä¿ç•™æ•°æ®ï¼Œåˆ™éœ€è¦ä½¿ç”¨ <code>useRef</code>ï¼Œå…¶å®šä¹‰çš„å˜é‡æ˜¯å¯å˜çš„ï¼Œä¹Ÿä¸ä¼šè§¦å‘é‡æ–°æ¸²æŸ“ã€‚</p><blockquote><p>ä¸è¦åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­è¯»å–æˆ–å†™å…¥ <code>ref.current</code></p></blockquote><p>ä¸€èˆ¬ç”¨äºä¿å­˜DOMæˆ–ä»»æ„æ•°æ®ï¼Œé‡æ–°æ¸²æŸ“ <code>useRef </code> å°†è¿”å›ç›¸åŒçš„å¼•ç”¨ã€‚</p><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> Component </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">myRef</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">useRef</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">null</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//    -----          ----</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//      ^              ^</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//      |              |</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//   å¯å˜refå¯¹è±¡     å¯å˜refå¯¹è±¡currentå±æ€§åˆå§‹å€¼</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// è¯»å–å¯å˜å€¼</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">myRef</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">current</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// æ›´æ–°å¯å˜å€¼</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">myRef</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">current</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">newValue</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span></code></pre></div><ul><li>å­˜å‚¨æ•°æ®</li></ul><blockquote><p>Vue æ˜¯æœ¬æ¥æ•°æ®å°±æ˜¯å¯å˜çš„ï¼Œå¯ä»¥ç»´æŒçŠ¶æ€ï¼Œä¸éœ€è¦è¿™ç©æ„ã€‚</p></blockquote><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">useRef</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">react</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Counter</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ref</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">useRef</span><span style="color:#F07178;">(</span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">handleClick</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">ref</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">current</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ref</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">current</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> (</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">onClick</span><span style="color:#89DDFF;">={</span><span style="color:#A6ACCD;">handleClick</span><span style="color:#89DDFF;">}&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      Click me!</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#F07178;">  )</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><ul><li>æ“ä½œDOM</li></ul><blockquote><p>è¿™é‡Œå°±å’Œ Vueä¸­ ä½¿ç”¨ ref å·®ä¸å¤š</p></blockquote><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">useRef</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">react</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Form</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">inputRef</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">useRef</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">null</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">handleClick</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">inputRef</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">current</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">focus</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> (</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">&lt;&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">input</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">ref</span><span style="color:#89DDFF;">={</span><span style="color:#A6ACCD;">inputRef</span><span style="color:#89DDFF;">} /&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">onClick</span><span style="color:#89DDFF;">={</span><span style="color:#A6ACCD;">handleClick</span><span style="color:#89DDFF;">}&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        Focus the input</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/&gt;</span></span>
<span class="line"><span style="color:#F07178;">  )</span><span style="color:#89DDFF;">;</span></span></code></pre></div><ul><li><strong>forwardRef</strong></li></ul><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// ä½¿ç”¨ forwardRef å®šä¹‰ç»„ä»¶ï¼Œå¯ä»¥ä¼ é€’ ref å‚æ•°</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> MyInput </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">forwardRef</span><span style="color:#A6ACCD;">(</span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">MyInput</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">props</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">ref</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span></code></pre></div><ul><li>ä¼ é€’ ref å¼•ç”¨ï¼Œç”¨äºæ“ä½œå­ä»£ç»„ä»¶çš„DOMã€‚Vue ä¸­ç›´æ¥è·å–ç»„ä»¶å®ä¾‹çš„å¯¹åº”çš„refå˜é‡å³å¯</li><li>é…å’Œ <strong>useImperativeHandle</strong> é€‰æ‹©æš´éœ²å­ç»„ä»¶çš„æ–¹æ³•ï¼Œç±»ä¼¼ Vue3 ä¸­çš„ <code>expose</code></li></ul><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">forwardRef</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">useImperativeHandle</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">react</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> MyInput </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">forwardRef</span><span style="color:#A6ACCD;">(</span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">MyInput</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">props</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">ref</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">useImperativeHandle</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">ref</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// ... your methods ...</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span><span style="color:#F07178;"> [])</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">input</span><span style="color:#89DDFF;"> {...</span><span style="color:#A6ACCD;">props</span><span style="color:#89DDFF;">} /&gt;;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span></code></pre></div><blockquote><p>Imperative: å¿…è¦</p></blockquote><h3 id="_3-5-usecallback-usememo" tabindex="-1">3.5 useCallback&amp;useMemo <a class="header-anchor" href="#_3-5-usecallback-usememo" aria-label="Permalink to &quot;3.5 useCallback&amp;useMemo&quot;">â€‹</a></h3>`,86),t=s("blockquote",{return:"","useMemo(":"","()":""},[s("p",null,"ä¼˜åŒ–æ€§èƒ½ä½¿ç”¨ï¼Œå¯ä»¥å‡å°‘ä¸å¿…è¦çš„æ¸²æŸ“ï¼Œä¸å¿…è¿‡æ—©çš„æ€§èƒ½ä¼˜åŒ–"),s("p",null,"function useCallback(callback,deps )")],-1),c=n(`<div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// useCallback æ˜¯é€šè¿‡ useMemo å®ç°çš„</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">useCallback</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">callback</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;font-style:italic;">deps</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">useMemo</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">callback</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">deps</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> memoizedFunc </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">useCallback</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#676E95;font-style:italic;">/*çœç•¥*/</span><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> [a</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> b])</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//    ------------               ---------------   -----</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//         ^                            ^            ^</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//         |                            |            |</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//   è®°å¿†åŒ–çš„å›è°ƒå‡½æ•°                   å›è°ƒå‡½æ•°      ä¾èµ–å€¼æ•°ç»„</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> memoizedFunc </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">useMemo</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#676E95;font-style:italic;">/*çœç•¥*/</span><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> [a</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> b])</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//    ------------           ---------------------   -----</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//       ^                      ^  ---------------      ^</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//       |                      |         ^             |</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// å·¥å‚å‡½æ•°è¿”å›çš„å›è°ƒå‡½æ•°        å·¥å‚å‡½æ•°   å›è°ƒå‡½æ•°        ä¾èµ–å€¼æ•°ç»„</span></span></code></pre></div><ul><li><strong>useMemo</strong></li></ul><p>useMemo çš„åŠŸèƒ½æ˜¯ä¸ºå·¥å‚å‡½æ•°è¿”å›ä¸€ä¸ªè®°å¿†åŒ–çš„è®¡ç®—å€¼ï¼Œåœ¨ä¸¤æ¬¡æ¸²æŸ“ä¹‹é—´ï¼Œåªæœ‰ä¾èµ–å€¼æ•°ç»„ä¸­çš„ä¾èµ–å€¼æœ‰å˜åŒ–æ—¶ï¼Œè¯¥ Hook æ‰ä¼šè°ƒç”¨å·¥å‚å‡½æ•°é‡æ–°è®¡ç®—ï¼Œå°†æ–°çš„è¿”å›å€¼è®°å¿†åŒ–å¹¶è¿”å›ç»™ç»„ä»¶ã€‚</p><p>useMemo æœ€é‡è¦çš„ä½¿ç”¨åœºæ™¯ï¼Œæ˜¯å°†æ‰§è¡Œæˆæœ¬è¾ƒé«˜çš„è®¡ç®—ç»“æœå­˜å…¥ç¼“å­˜ï¼Œé€šè¿‡å‡å°‘é‡å¤è®¡ç®—æ¥æå‡ç»„ä»¶æ€§èƒ½ã€‚</p><blockquote><p>useMemoç±»ä¼¼ Vue ä¸­çš„ computed</p></blockquote><ul><li><strong>useCallback</strong></li></ul><p>å¦‚æœéœ€è¦ç¼“å­˜å‡½æ•°åˆ™ä½¿ç”¨ useCallbackï¼Œå°‘ä¸€å±‚ç®­å¤´å‡½æ•°ï¼Œæ›´æ–¹ä¾¿ä½¿ç”¨ã€‚</p><p>useCallback ï¼Œå®ƒä¼šæŠŠä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°çš„å›è°ƒå‡½æ•°è¿”å›ç»™ç»„ä»¶ï¼Œåªè¦ç¬¬äºŒä¸ªå‚æ•°ä¾èµ–å€¼æ•°ç»„çš„ä¾èµ–é¡¹ä¸æ”¹å˜ï¼Œå®ƒå°±ä¼šä¿è¯ä¸€ç›´è¿”å›åŒä¸€ä¸ªå›è°ƒå‡½æ•°ï¼ˆå¼•ç”¨ï¼‰ï¼Œè€Œä¸æ˜¯æ–°å»ºä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¹Ÿä¿è¯äº†å›è°ƒå‡½æ•°çš„é—­åŒ…ä¹Ÿæ˜¯ä¸å˜çš„ï¼›ç›¸åï¼Œå½“ä¾èµ–é¡¹æ”¹å˜æ—¶ï¼Œ useCallback æ‰ä¼šæ›´æ–°å›è°ƒå‡½æ•°åŠå…¶é—­åŒ…ã€‚</p><h3 id="_3-6-usereducer" tabindex="-1">3.6 useReducer <a class="header-anchor" href="#_3-6-usereducer" aria-label="Permalink to &quot;3.6 useReducer&quot;">â€‹</a></h3><p>åƒæ•°ç»„çš„<code>reduce</code>æ–¹æ³•ä¸€æ ·ï¼Œæ¥å— <code>ç›®å‰çš„çŠ¶æ€</code> å’Œ <code>action</code> ï¼Œç„¶åè¿”å› <code>ä¸‹ä¸€ä¸ªçŠ¶æ€</code>ã€‚</p><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> dispatch</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">useReducer</span><span style="color:#A6ACCD;">(reducer</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> initState)</span><span style="color:#89DDFF;">;</span></span></code></pre></div><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> initialState </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">count</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// è¿”å›æ–°çš„ state</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">reducer</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">state</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">action</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">switch</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">action</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">type</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">case</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">increment</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> count</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">count</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">case</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">decrement</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> count</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">count</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">throw</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Error</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Counter</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// useReducer ä¼šæ ¹ æ®dispatchçš„actionï¼Œè¿”å›æ–°çš„stateï¼Œå¹¶è§¦å‘rerender</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">dispatch</span><span style="color:#89DDFF;">]</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">useReducer</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">reducer</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">initialState</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> (</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">&lt;&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      Count: </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">count</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">onClick</span><span style="color:#89DDFF;">={()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">dispatch</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">type</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">increment</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">}&gt;</span><span style="color:#A6ACCD;">+</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">onClick</span><span style="color:#89DDFF;">={()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">dispatch</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">type</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">decrement</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">}&gt;</span><span style="color:#A6ACCD;">-</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/&gt;</span></span>
<span class="line"><span style="color:#F07178;">  )</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><h2 id="_4-diff" tabindex="-1">4. Diff <a class="header-anchor" href="#_4-diff" aria-label="Permalink to &quot;4. Diff&quot;">â€‹</a></h2><blockquote><p><a href="https://github.com/vuejs/rfcs/issues/89#top" target="_blank" rel="noreferrer">Why remove time slicing from vue3?</a></p><p>æ€»ç»“å°±æ˜¯ï¼šVueç”±äºå“åº”å¼å’Œç¼–è¯‘ä¼˜åŒ–ï¼Œæ€§èƒ½å·²ç»è¶³å¤Ÿå¥½ï¼Œå¼•å…¥ Fiber ä¼šå¢åŠ å¤æ‚åº¦ï¼Œæ”¶ç›Šæ²¡æœ‰é‚£ä¹ˆæ˜æ˜¾ã€‚</p></blockquote><h2 id="å…¶ä»–" tabindex="-1">å…¶ä»– <a class="header-anchor" href="#å…¶ä»–" aria-label="Permalink to &quot;å…¶ä»–&quot;">â€‹</a></h2><p><a href="https://juejin.cn/post/7195486276936532028" target="_blank" rel="noreferrer">https://juejin.cn/post/7195486276936532028</a></p>`,16),r=[e,t,c];function y(F,D,i,C,A,u){return l(),p("div",null,r)}const g=a(o,[["render",y]]);export{f as __pageData,g as default};
